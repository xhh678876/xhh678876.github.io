<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <button>
          <div class="navicon"></div>
        </button>
        <ul class="visible-links">
          <li class="masthead__menu-item"><a id="lang-toggle" href="#" target="_self">切换语言</a></li>
          {% if page.url contains '/zh/' or page.permalink == '/zh/' %}
          {% assign nav = site.data.navigation.main %}
          {% else %}
          {% assign nav = site.data.navigation_en.main %}
          {% endif %}
          {% for link in nav %}
          <li class="masthead__menu-item"><a href="{{ link.url }}" target="_self">{{ link.title }}</a></li>
          {% endfor %}
        </ul>
        <script>
          (function () {
            try {
              var p = location.pathname;
              var h = location.hash || '';
              // 检查是否在中文页面
              var isZh = p.indexOf('/zh/') !== -1 || p === '/zh/' || p === '/zh';
              var target = isZh ? '/' : '/zh/';
              var a = document.getElementById('lang-toggle');
              if (a) {
                a.textContent = isZh ? 'English' : '中文';
                a.setAttribute('href', target);
              }
            } catch (e) { }
          })();
        </script>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>