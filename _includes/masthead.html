<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <button>
          <div class="navicon"></div>
        </button>
        <ul class="visible-links">
          <li class="masthead__menu-item"><a id="lang-toggle" href="#" target="_self">切换语言</a></li>
          {% if page.url contains '/en/' or page.permalink == '/en/' %}
          {% assign nav = site.data.navigation_en.main %}
          {% else %}
          {% assign nav = site.data.navigation.main %}
          {% endif %}
          {% for link in nav %}
          <li class="masthead__menu-item"><a href="{{ link.url }}" target="_self">{{ link.title }}</a></li>
          {% endfor %}
        </ul>
        <script>
          (function () {
            try {
              var p = location.pathname;
              var h = location.hash || '';
              var isEn = p.indexOf('/en/') === 0 || p === '/en/';
              var target = isEn ? '/' : '/en/';
              var a = document.getElementById('lang-toggle');
              if (a) {
                a.textContent = isEn ? '中文' : 'English';
                a.setAttribute('href', target + h);
              }
            } catch (e) { }
          })();
        </script>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>